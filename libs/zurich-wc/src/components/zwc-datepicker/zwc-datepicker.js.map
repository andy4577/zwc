{"version":3,"file":"zwc-datepicker.js","sources":["../../../../../../src/components/zwc-datepicker/zwc-datepicker.ts"],"sourcesContent":["import { customElement, property, query, state } from 'lit/decorators.js';\r\nimport { html, PropertyValueMap, TemplateResult } from 'lit';\r\nimport { classMap } from 'lit/directives/class-map.js';\r\nimport { Datepicker } from 'vanillajs-datepicker';\r\n\r\nimport { Base } from '../base';\r\nimport type { DatepickerOptions } from './Datepicker';\r\n\r\n@customElement('zwc-datepicker')\r\nexport class ZwcDatepicker extends Base {\r\n  @property({ type: Boolean, attribute: 'float-label' })\r\n  floatLabel = false;\r\n\r\n  @property({ type: Boolean, attribute: 'has-error' })\r\n  hasError = false;\r\n\r\n  @property({ type: Boolean, attribute: 'disabled' })\r\n  disabled = false;\r\n\r\n  @property({ type: Boolean })\r\n  shape = false;\r\n\r\n  // Datepicker props\r\n  @property({ type: String })\r\n  placeholder = '';\r\n\r\n  @property({ type: String, attribute: 'format' })\r\n  dateFormat = 'dd/mm/yyyy';\r\n\r\n  @property({ type: Boolean, attribute: 'today-highlight' })\r\n  dataTodayHighlight = false;\r\n\r\n  @property({ type: String, attribute: 'language' })\r\n  dataLanguage = 'en';\r\n\r\n  @property({ type: Object })\r\n  locales: Record<string, any>[] | null = null;\r\n\r\n  @property({ type: Boolean, attribute: 'auto-hide' })\r\n  dataAutohide = false;\r\n\r\n  @property({ type: Boolean, attribute: 'calendar-weeks' })\r\n  dataShowCalendarWeeks = false;\r\n\r\n  @property({ type: Object, attribute: 'datepicker-options' })\r\n  datepickerOptions: DatepickerOptions = {};\r\n\r\n  // Label prop\r\n  @property({ type: String, attribute: 'label' })\r\n  labelText = 'Label Text';\r\n\r\n  // Ref\r\n  @query('input')\r\n  private inputField!: HTMLInputElement;\r\n\r\n  @state()\r\n  private isNotEmpty = false;\r\n\r\n  @state()\r\n  private isActive = false;\r\n\r\n  private datepickerInstance: Datepicker | null = null;\r\n\r\n  private get options(): DatepickerOptions {\r\n    return {\r\n      autohide: this.dataAutohide,\r\n      format: this.dateFormat,\r\n      todayHighlight: this.dataTodayHighlight,\r\n      orientation: 'bottom left',\r\n      language: this.dataLanguage,\r\n      ...this.datepickerOptions,\r\n    };\r\n  }\r\n\r\n  protected override render(): TemplateResult {\r\n    const classes = {\r\n      textfield: true,\r\n      disabled: this.disabled,\r\n      'textfield-datepicker': true,\r\n      'textfield--float-label': this.floatLabel,\r\n      'has-error': this.hasError,\r\n      'datepicker-active': this.isActive,\r\n      'is-not-empty': this.isNotEmpty || this.isActive,\r\n    };\r\n\r\n    return html` <div class=\"${classMap(classes)}\">\r\n      ${this.shape\r\n        ? html` <div class=\"datepicker-wrapper\">\r\n            ${this.renderInputText()}\r\n            <span class=\"icon icon--communication-calendar-end_outline\"></span>\r\n          </div>`\r\n        : html` ${this.renderInputText()}\r\n            <span\r\n              class=\"icon icon--communication-calendar-end_outline\"\r\n            ></span>`}\r\n      ${this.renderLabel()} ${this.renderHelper()}\r\n    </div>`;\r\n  }\r\n\r\n  protected firstUpdated(): void {\r\n    if (this.inputField) {\r\n      if (this.locales) {\r\n        Object.assign(Datepicker.locales, ...this.locales);\r\n      }\r\n      this.datepickerInstance = new Datepicker(this.inputField, this.options);\r\n\r\n      this.inputField.addEventListener('show', () => (this.isActive = true));\r\n      this.inputField.addEventListener('hide', () => (this.isActive = false));\r\n\r\n      this.setRoleAttr(this.datepickerInstance, 'button');\r\n    }\r\n  }\r\n\r\n  // Setting role='button' on all the day cells of calendar WAI-ARIA compliance;\r\n  setRoleAttr(datepickerInstance: Datepicker, role: string) {\r\n    const collection: HTMLCollection =\r\n      datepickerInstance.picker.element.querySelectorAll('.datepicker-cell');\r\n    Array.from(collection).forEach(day => day.setAttribute('role', role));\r\n  }\r\n\r\n  protected willUpdate(\r\n    _changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>,\r\n  ): void {\r\n    // Set dynamically language option on datepicker instance\r\n    if (\r\n      _changedProperties.has('dataLanguage') &&\r\n      _changedProperties.get('dataLanguage')\r\n    ) {\r\n      if (Object.keys(Datepicker.locales).includes(this.dataLanguage)) {\r\n        this.datepickerInstance?.setOptions({ language: this.dataLanguage });\r\n      } else {\r\n        console.error(\r\n          'You are trying to set language that is not available in your locales %o',\r\n          Datepicker?.locales,\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  protected renderInputText(): TemplateResult {\r\n    const classes = {\r\n      'textfield-control': true,\r\n      'is-not-empty': this.isNotEmpty,\r\n    };\r\n\r\n    return html` <input\r\n      type=\"text\"\r\n      id=\"datepicker-calendar\"\r\n      name=\"date-01\"\r\n      class=\"${classMap(classes)}\"\r\n      value=\"\"\r\n      role=\"combobox\"\r\n      inputmode=\"none\"\r\n      ?disabled=\"${this.disabled}\"\r\n      .placeholder=\"${this.placeholder}\"\r\n      autocomplete=\"off\"\r\n      aria-label=\"Date:\"\r\n      aria-expanded=\"false\"\r\n      aria-haspopup=\"dialog\"\r\n      aria-controls=\"cb-dialog-1\"\r\n      aria-describedby=\"datepicker-calendar\"\r\n      @changeDate=\"${this.emitChangeDate}\"\r\n      @changeMonth=\"${this.emitChangeMonth}\"\r\n      @changeView=\"${this.emitChangeView}\"\r\n      @changeYear=\"${this.emitChangeYear}\"\r\n      @hide=\"${this.emitHide}\"\r\n      @show=\"${this.emitShow}\"\r\n    />`;\r\n  }\r\n\r\n  // On destroy\r\n  public disconnectedCallback(): void {\r\n    this.datepickerInstance?.destroy();\r\n    super.disconnectedCallback();\r\n  }\r\n\r\n  emitShow(e: CustomEvent): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('show', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  emitHide(e: CustomEvent): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('hide', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  emitChangeYear(e: CustomEvent): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('changeYear', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  emitChangeView(e: CustomEvent): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('changeView', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  emitChangeMonth(e: CustomEvent): void {\r\n    this.dispatchEvent(\r\n      new CustomEvent('changeMonth', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  emitChangeDate(e: CustomEvent): void {\r\n    this.isNotEmpty = this.setInputBoolean(e);\r\n    this.dispatchEvent(\r\n      new CustomEvent('changeDate', {\r\n        composed: true,\r\n        cancelable: true,\r\n        bubbles: true,\r\n        detail: e.detail,\r\n      }),\r\n    );\r\n  }\r\n\r\n  protected renderLabel(): TemplateResult {\r\n    return html` <label\r\n      class=\"textfield-label\"\r\n      for=\"datepicker-calendar\"\r\n      id=\"date-format-description\"\r\n    >\r\n      ${this.labelText}\r\n    </label>`;\r\n  }\r\n\r\n  protected renderHelper(): TemplateResult {\r\n    return html`<span class=\"textfield-helper\">${this.dateFormat}</span>`;\r\n  }\r\n\r\n  private setInputBoolean(e: CustomEvent): boolean {\r\n    return e.detail?.date !== undefined;\r\n  }\r\n}\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'zwc-datepicker': ZwcDatepicker;\r\n  }\r\n}\r\n"],"names":["ZwcDatepicker","Base","classes","html","classMap","Datepicker","datepickerInstance","role","collection","day","_changedProperties","_a","_b","__decorateClass","property","query","state","customElement"],"mappings":"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"}