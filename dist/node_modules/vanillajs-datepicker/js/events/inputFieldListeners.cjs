"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const M=require("../lib/utils.cjs"),D=require("../lib/dom.cjs"),r=require("../lib/date.cjs"),d=require("./functions.cjs");function h(e,n,t,i,l,o){if(!!M.isInRange(e,l,o)){if(i(e)){const u=n(e,t);return h(u,n,t,i,l,o)}return e}}function w(e,n,t,i){const l=e.picker,o=l.currentView,u=o.step||1;let s=l.viewDate,c,a;switch(o.id){case 0:i?s=r.addDays(s,t*7):n.ctrlKey||n.metaKey?s=r.addYears(s,t):s=r.addDays(s,t),c=r.addDays,a=f=>o.disabled.includes(f);break;case 1:s=r.addMonths(s,i?t*4:t),c=r.addMonths,a=f=>{const y=new Date(f),{year:g,disabled:K}=o;return y.getFullYear()===g&&K.includes(y.getMonth())};break;default:s=r.addYears(s,t*(i?4:1)*u),c=r.addYears,a=f=>o.disabled.includes(r.startOfYearPeriod(f,u))}s=h(s,c,t<0?-u:u,a,o.minDate,o.maxDate),s!==void 0&&l.changeFocus(s).render()}function E(e,n){const t=n.key;if(t==="Tab"){d.unfocus(e);return}const i=e.picker,{id:l,isMinView:o}=i.currentView;if(i.active)if(e.editMode){t==="Enter"?e.exitEditMode({update:!0,autohide:e.config.autohide}):t==="Escape"&&i.hide();return}else if(t==="ArrowLeft")if(n.ctrlKey||n.metaKey)d.goToPrevOrNext(e,-1);else if(n.shiftKey){e.enterEditMode();return}else w(e,n,-1,!1);else if(t==="ArrowRight")if(n.ctrlKey||n.metaKey)d.goToPrevOrNext(e,1);else if(n.shiftKey){e.enterEditMode();return}else w(e,n,1,!1);else if(t==="ArrowUp")if(n.ctrlKey||n.metaKey)d.switchView(e);else if(n.shiftKey){e.enterEditMode();return}else w(e,n,-1,!0);else if(t==="ArrowDown"){if(n.shiftKey&&!n.ctrlKey&&!n.metaKey){e.enterEditMode();return}w(e,n,1,!0)}else if(t==="Enter"){if(o){e.setDate(i.viewDate);return}i.changeView(l-1).render()}else{t==="Escape"?i.hide():(t==="Backspace"||t==="Delete"||t.length===1&&!n.ctrlKey&&!n.metaKey)&&e.enterEditMode();return}else if(t==="ArrowDown")i.show();else{t==="Enter"?e.update():t==="Escape"&&i.show();return}n.preventDefault()}function b(e){e.config.showOnFocus&&!e._showing&&e.show()}function m(e,n){const t=n.target;(e.picker.active||e.config.showOnClick)&&(t._active=D.isActiveElement(t),t._clicking=setTimeout(()=>{delete t._active,delete t._clicking},2e3))}function _(e,n){const t=n.target;!t._clicking||(clearTimeout(t._clicking),delete t._clicking,t._active&&e.enterEditMode(),delete t._active,e.config.showOnClick&&e.show())}function A(e,n){n.clipboardData.types.includes("text/plain")&&e.enterEditMode()}exports.onClickInput=_;exports.onFocus=b;exports.onKeydown=E;exports.onMousedown=m;exports.onPaste=A;
//# sourceMappingURL=inputFieldListeners.cjs.map
