"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const D=require("./date.cjs"),w=require("./utils.cjs"),y=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,g=/[\s!-/:-@[-`{-~年月日]+/;let p={};const m={y(e,t){return new Date(e).setFullYear(parseInt(t,10))},m(e,t,n){const r=new Date(e);let a=parseInt(t,10)-1;if(isNaN(a)){if(!t)return NaN;const o=t.toLowerCase(),u=f=>f.toLowerCase().startsWith(o);if(a=n.monthsShort.findIndex(u),a<0&&(a=n.months.findIndex(u)),a<0)return NaN}return r.setMonth(a),r.getMonth()!==h(a)?r.setDate(0):r.getTime()},d(e,t){return new Date(e).setDate(parseInt(t,10))}},M={d(e){return e.getDate()},dd(e){return d(e.getDate(),2)},D(e,t){return t.daysShort[e.getDay()]},DD(e,t){return t.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return d(e.getMonth()+1,2)},M(e,t){return t.monthsShort[e.getMonth()]},MM(e,t){return t.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return d(e.getFullYear(),2).slice(-2)},yyyy(e){return d(e.getFullYear(),4)}};function h(e){return e>-1?e%12:h(e+12)}function d(e,t){return e.toString().padStart(t,"0")}function N(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in p)return p[e];const t=e.split(y),n=e.match(new RegExp(y,"g"));if(t.length===0||!n)throw new Error("Invalid date format.");const r=n.map(o=>M[o]),a=Object.keys(m).reduce((o,u)=>(n.find(s=>s[0]!=="D"&&s[0].toLowerCase()===u)&&o.push(u),o),[]);return p[e]={parser(o,u){const f=o.split(g).reduce((s,i,c)=>{if(i.length>0&&n[c]){const l=n[c][0];l==="M"?s.m=i:l!=="D"&&(s[l]=i)}return s},{});return a.reduce((s,i)=>{const c=m[i](s,f[i],u);return isNaN(c)?s:c},D.today())},formatter(o,u){let f=r.reduce((s,i,c)=>s+=`${t[c]}${i(o,u)}`,"");return f+=w.lastItemOf(t)}}}function F(e,t,n){if(e instanceof Date||typeof e=="number"){const r=D.stripTime(e);return isNaN(r)?void 0:r}if(!!e){if(e==="today")return D.today();if(t&&t.toValue){const r=t.toValue(e,t,n);return isNaN(r)?void 0:D.stripTime(r)}return N(t).parser(e,n)}}function I(e,t,n){if(isNaN(e)||!e&&e!==0)return"";const r=typeof e=="number"?new Date(e):e;return t.toDisplay?t.toDisplay(r,t,n):N(t).formatter(r,n)}exports.formatDate=I;exports.parseDate=F;exports.reFormatTokens=y;exports.reNonDateParts=g;
//# sourceMappingURL=date-format.cjs.map
