"use strict";const S=require("../lib/utils.cjs"),h=require("../lib/date.cjs"),k=require("../lib/date-format.cjs"),N=require("../lib/dom.cjs"),j=require("./defaultOptions.cjs"),{language:V,format:T,weekStart:q}=j;function L(n,d){return n.length<6&&d>=0&&d<7?S.pushUnique(n,d):n}function W(n){return(n+6)%7}function A(n,d,e,a){const l=k.parseDate(n,d,e);return l!==void 0?l:a}function y(n,d,e=3){const a=parseInt(n,10);return a>=0&&a<=e?a:d}function H(n,d){const e=Object.assign({},n),a={},l=d.constructor.locales,M=d.rangeSideIndex;let{format:c,language:b,locale:r,maxDate:g,maxView:m,minDate:w,pickLevel:o,startView:v,weekStart:O}=d.config||{};if(e.language){let t;if(e.language!==b&&(l[e.language]?t=e.language:(t=e.language.split("-")[0],l[t]===void 0&&(t=!1))),delete e.language,t){b=a.language=t;const i=r||l[V];r=Object.assign({format:T,weekStart:q},l[V]),b!==V&&Object.assign(r,l[b]),a.locale=r,c===i.format&&(c=a.format=r.format),O===i.weekStart&&(O=a.weekStart=r.weekStart,a.weekEnd=W(r.weekStart))}}if(e.format){const t=typeof e.format.toDisplay=="function",i=typeof e.format.toValue=="function",x=k.reFormatTokens.test(e.format);(t&&i||x)&&(c=a.format=e.format),delete e.format}let p=o;e.pickLevel!==void 0&&(p=y(e.pickLevel,2),delete e.pickLevel),p!==o&&(p>o&&(e.minDate===void 0&&(e.minDate=w),e.maxDate===void 0&&(e.maxDate=g)),e.datesDisabled||(e.datesDisabled=[]),o=a.pickLevel=p);let s=w,f=g;if(e.minDate!==void 0){const t=h.dateValue(0,0,1);s=e.minDate===null?t:A(e.minDate,c,r,s),s!==t&&(s=h.regularizeDate(s,o,!1)),delete e.minDate}if(e.maxDate!==void 0&&(f=e.maxDate===null?void 0:A(e.maxDate,c,r,f),f!==void 0&&(f=h.regularizeDate(f,o,!0)),delete e.maxDate),f<s?(w=a.minDate=f,g=a.maxDate=s):(w!==s&&(w=a.minDate=s),g!==f&&(g=a.maxDate=f)),e.datesDisabled&&(a.datesDisabled=e.datesDisabled.reduce((t,i)=>{const x=k.parseDate(i,c,r);return x!==void 0?S.pushUnique(t,h.regularizeDate(x,o,M)):t},[]),delete e.datesDisabled),e.defaultViewDate!==void 0){const t=k.parseDate(e.defaultViewDate,c,r);t!==void 0&&(a.defaultViewDate=t),delete e.defaultViewDate}if(e.weekStart!==void 0){const t=Number(e.weekStart)%7;isNaN(t)||(O=a.weekStart=t,a.weekEnd=W(t)),delete e.weekStart}if(e.daysOfWeekDisabled&&(a.daysOfWeekDisabled=e.daysOfWeekDisabled.reduce(L,[]),delete e.daysOfWeekDisabled),e.daysOfWeekHighlighted&&(a.daysOfWeekHighlighted=e.daysOfWeekHighlighted.reduce(L,[]),delete e.daysOfWeekHighlighted),e.maxNumberOfDates!==void 0){const t=parseInt(e.maxNumberOfDates,10);t>=0&&(a.maxNumberOfDates=t,a.multidate=t!==1),delete e.maxNumberOfDates}e.dateDelimiter&&(a.dateDelimiter=String(e.dateDelimiter),delete e.dateDelimiter);let D=m;e.maxView!==void 0&&(D=y(e.maxView,m),delete e.maxView),D=o>D?o:D,D!==m&&(m=a.maxView=D);let u=v;if(e.startView!==void 0&&(u=y(e.startView,u),delete e.startView),u<o?u=o:u>m&&(u=m),u!==v&&(a.startView=u),e.prevArrow){const t=N.parseHTML(e.prevArrow);t.childNodes.length>0&&(a.prevArrow=t.childNodes),delete e.prevArrow}if(e.nextArrow){const t=N.parseHTML(e.nextArrow);t.childNodes.length>0&&(a.nextArrow=t.childNodes),delete e.nextArrow}if(e.disableTouchKeyboard!==void 0&&(a.disableTouchKeyboard="ontouchstart"in document&&!!e.disableTouchKeyboard,delete e.disableTouchKeyboard),e.orientation){const t=e.orientation.toLowerCase().split(/\s+/g);a.orientation={x:t.find(i=>i==="left"||i==="right")||"auto",y:t.find(i=>i==="top"||i==="bottom")||"auto"},delete e.orientation}if(e.todayBtnMode!==void 0){switch(e.todayBtnMode){case 0:case 1:a.todayBtnMode=e.todayBtnMode}delete e.todayBtnMode}return Object.keys(e).forEach(t=>{e[t]!==void 0&&S.hasProperty(j,t)&&(a[t]=e[t])}),a}module.exports=H;
//# sourceMappingURL=processOptions.cjs.map
